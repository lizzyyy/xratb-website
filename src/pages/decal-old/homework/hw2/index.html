<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/decal/assets/css/just-the-docs-default.css"> <script src="/decal/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Homework 2: Music Visualizer | Extended Reality Development</title><meta name="generator" content="Jekyll v3.9.3" /><meta property="og:title" content="Homework 2: Music Visualizer" /><meta property="og:locale" content="en_US" /><meta name="description" content="Extended Reality Development DeCal" /><meta property="og:description" content="Extended Reality Development DeCal" /><link rel="canonical" href="http://localhost:4000/decal/homework/hw2/" /><meta property="og:url" content="http://localhost:4000/decal/homework/hw2/" /><meta property="og:site_name" content="Extended Reality Development" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Homework 2: Music Visualizer" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Extended Reality Development DeCal","headline":"Homework 2: Music Visualizer","url":"http://localhost:4000/decal/homework/hw2/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/decal/" class="site-title lh-tight"> Extended Reality Development </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/decal/" class="nav-list-link">Home / Announcements</a><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Homework category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/decal/homework/" class="nav-list-link">Homework</a><ul class="nav-list "><li class="nav-list-item "><a href="/decal/homework/hw1/" class="nav-list-link">Homework 1: The Rube Goldberg Ball Machine</a><li class="nav-list-item active"><a href="/decal/homework/hw2/" class="nav-list-link active">Homework 2: Music Visualizer</a><li class="nav-list-item "><a href="/decal/homework/hw3/" class="nav-list-link">Homework 3: Fractal Generation</a><li class="nav-list-item "><a href="/decal/homework/hw4/" class="nav-list-link">Homework 4: Pong</a><li class="nav-list-item "><a href="/decal/homework/hw5/" class="nav-list-link">Homework 5: Collisions, Raycasting, and Triggers</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Labs category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/decal/labs/" class="nav-list-link">Labs</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Oculus category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/decal/labs/Oculus/" class="nav-list-link">Oculus</a><ul class="nav-list"><li class="nav-list-item "> <a href="/decal/labs/Oculus/lab1/" class="nav-list-link">Oculus Lab 1: Building the Environment</a><li class="nav-list-item "> <a href="/decal/labs/Oculus/lab2/" class="nav-list-link">Oculus Lab 2: Building the Gun</a><li class="nav-list-item "> <a href="/decal/labs/Oculus/lab3/" class="nav-list-link">Oculus Lab 3: The Monster</a><li class="nav-list-item "> <a href="/decal/labs/Oculus/lab4/" class="nav-list-link">Oculus Lab 4: Putting It All Together</a></ul><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in AR Foundation category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/decal/labs/AR%20Foundation/" class="nav-list-link">AR Foundation</a><ul class="nav-list"><li class="nav-list-item "> <a href="/decal/labs/AR%20Foundation/lab1/" class="nav-list-link">AR Foundation Lab 1: Project Setup / Building the Environment</a><li class="nav-list-item "> <a href="/decal/labs/AR%20Foundation/lab2/" class="nav-list-link">AR Foundation Lab 2: Building the Gun</a><li class="nav-list-item "> <a href="/decal/labs/AR%20Foundation/lab3/" class="nav-list-link">AR Foundation Lab 3: The Monster</a><li class="nav-list-item "> <a href="/decal/labs/AR%20Foundation/lab4/" class="nav-list-link">AR Foundation Lab 4: Putting It All Together</a><li class="nav-list-item "> <a href="/decal/labs/AR%20Foundation/lab5/" class="nav-list-link">AR Foundation Lab 5: Image Tracking, Health Bar</a></ul><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in HTC Vive category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/decal/labs/HTC%20Vive/" class="nav-list-link">HTC Vive</a><ul class="nav-list"><li class="nav-list-item "> <a href="/decal/labs/HTC%20Vive/lab1/" class="nav-list-link">Vive Lab 1: Building the Environment</a><li class="nav-list-item "> <a href="/decal/labs/HTC%20Vive/lab2/" class="nav-list-link">Vive Lab 2: Creating the Gun</a><li class="nav-list-item "> <a href="/decal/labs/HTC%20Vive/lab3/" class="nav-list-link">Vive Lab 3: The Monster</a><li class="nav-list-item "> <a href="/decal/labs/HTC%20Vive/lab4/" class="nav-list-link">Vive Lab 4: Putting It All Together</a></ul></ul><li class="nav-list-item"><a href="/decal/lectures/" class="nav-list-link">Lectures</a><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Final Project category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/decal/final-project/" class="nav-list-link">Final Project</a><ul class="nav-list "><li class="nav-list-item "><a href="/decal/final-project/project-resources/" class="nav-list-link">Project Resources</a></ul><li class="nav-list-item"><a href="/decal/extra-resources/" class="nav-list-link">Extra Resources</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div></div></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/decal/homework/">Homework</a><li class="breadcrumb-nav-list-item"><span>Homework 2: Music Visualizer</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 class="no_toc" id="homework-2-music-visualizer"> <a href="#homework-2-music-visualizer" class="anchor-heading" aria-labelledby="homework-2-music-visualizer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Homework 2: Music Visualizer</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="#introducing-spectrum-theory" id="markdown-toc-introducing-spectrum-theory">Introducing Spectrum Theory</a><li><a href="#extracting-spectrum-data" id="markdown-toc-extracting-spectrum-data">Extracting Spectrum Data</a><li><a href="#visualizing-spectrum-data" id="markdown-toc-visualizing-spectrum-data">Visualizing Spectrum Data</a><li><a href="#introducing-frequency-bands" id="markdown-toc-introducing-frequency-bands">Introducing Frequency Bands</a><li><a href="#8-bin-separation" id="markdown-toc-8-bin-separation">8 Bin Separation</a><li><a href="#visualizing-8-bins" id="markdown-toc-visualizing-8-bins">Visualizing 8 Bins</a><li><a href="#add-your-own-flair" id="markdown-toc-add-your-own-flair">Add Your Own Flair</a><li><a href="#submission-and-grading" id="markdown-toc-submission-and-grading">Submission and Grading</a></ul><hr /><p>Your second assignment is to create your very own music visualizer! It will look something like this:</p><p><img src="/decal/assets/images/hw2/1.png" alt="image" /></p><p>This assignment will be a review of some of the Unity editor tools you have practiced in HW1, but more importantly, an introduction on using C# scripts to manipulate gameobjects.</p><p>First off, download the skeleton asset package <a href="https://drive.google.com/file/d/1qcFEAebMHNdoy75RfwDyPCGzI1t7l23H/view?usp=sharing"><strong>here</strong></a> and import it into a new project. Create a new scene called HW2 to work in.</p><p>In the meantime, take a look at these amazing music visualizer examples created with Unity by other people. This homework only goes over the basics, but you could take it to another level by adding your own flair. Links: <a href="https://www.youtube.com/watch?v=tMzmHWekLaY">1</a>, <a href="https://www.youtube.com/watch?v=cBYx8Dm81tc">2</a>, <a href="https://www.youtube.com/watch?v=80tu2ZLKD-o">3</a>, <a href="https://www.youtube.com/watch?v=XbNhv2ylzKw">4</a>, <a href="https://www.youtube.com/watch?v=swb-8Azjz9Q">5</a>.</p><h1 id="introducing-spectrum-theory"> <a href="#introducing-spectrum-theory" class="anchor-heading" aria-labelledby="introducing-spectrum-theory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introducing Spectrum Theory</h1><p>Every sound that enters your ear is actually a sum of different frequencies. Pure waveforms from various sources combine together into a single complex waveform. This complex waveform is then processed by your brain to create music, conversation, and everything else you hear.</p><p>The <a href="https://en.wikipedia.org/wiki/Fast_Fourier_transform"><strong>Fast Fourier Transform</strong></a> algorithm is the exact reverse - it takes a complex waveform and decomposes it into its base frequencies. Take the picture below as an example, which looks at a simple song from various perspectives.</p><p><img src="/decal/assets/images/hw2/2_0.png" alt="image" /></p><p>What you physically hear is the result, which is the sum of the pure bass, kick, synth, and harmonics waveforms.</p><p>Performing FFT on the result returns an array of weights, which represent how much of each base frequency is being used in the result. You’ll notice there are 4 peaks, one for each of the pure waveforms. The leftmost peak represents the lowest frequency (the bass), and is the tallest because the bass has the greatest amplitude out of the four waveforms.</p><p>You might have noticed the FFT graph looks a little bit like a music visualization - and in fact it is. Music visualizations are nothing more than visual representations of the FFT for a song and how it changes over time. In our case, we will be representing the values of the FFT with the heights of various cubes.</p><p><em>If you’d like to learn more, EE16A covers this subject in much more detail.</em></p><h1 id="extracting-spectrum-data"> <a href="#extracting-spectrum-data" class="anchor-heading" aria-labelledby="extracting-spectrum-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Extracting Spectrum Data</h1><p>Let’s start off the homework by creating a script that allows you to extract spectrum data from any audio source.</p><p>We will start by creating an empty gameobject named “SpectrumAnalyzer” and a C# script named “SpectrumAnalyzer”. Add both an Audio Source and the script to the gameobject. Then open the script in the text editor of your choice, which will likely be Visual Studio or Monodevelop.</p><p>As a side tangent, you may change your script editor by going to <em>Edit &gt; Preferences &gt; External Tools</em>.</p><p><img src="/decal/assets/images/hw2/6.png" alt="image" /></p><p>Start off by adding two variables to the script, above the Start() function.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AudioSource audioSource;
public static float[] samples = new float[512];
</code></pre></div></div><p>As you remember from roll-a-ball, the Start() function is called once, when the script is enabled. This makes it a good place to instantiate and/or initialize variables. We’ll initialize our audio source component here. Additionally, stub in a new function called GetSpectrumAudioSource().</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void Start () {
    audioSource = GetComponent&lt;AudioSource&gt;();
}

void GetSpectrumAudioSource() {

}
</code></pre></div></div><p>We’ll use this function to analyze the spectrum data from audioSource and save it in variable samples every frame. Fortunately, Unity has a built in function that does this for us, <a href="https://docs.unity3d.com/ScriptReference/AudioSource.GetSpectrumData.html">GetSpectrumData</a>. We’ll use channel 0 since we’re only playing one thing at a time, and use Blackman for our spectrum analysis window due to its overall robust behaviour.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void GetSpectrumAudioSource() {
    audioSource.GetSpectrumData(samples, 0, FFTWindow.Blackman);
}
</code></pre></div></div><p>Since we’ll want to update our spectrum samples every frame, put GetSpectrumAudioSource() in the Update function.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void Update () {
    GetSpectrumAudioSource();
}
</code></pre></div></div><p>Save your work and switch back to Unity. Select your SpectrumAnalyzer gameobject and set the AudioClip to whichever audio file you want to visualize. We have provided a sample audiofile in the Audio folder, in case you don’t have any. Here are some links to music if you’d like to download some: <a href="https://www.bensound.com/">1</a>, <a href="http://www.purple-planet.com/">2</a>, <a href="http://freemusicarchive.org/">3</a>, <a href="https://soundcloud.com/royalty-free-audio-loops">4</a>.</p><p><img src="/decal/assets/images/hw2/7.png" alt="image" /></p><h1 id="visualizing-spectrum-data"> <a href="#visualizing-spectrum-data" class="anchor-heading" aria-labelledby="visualizing-spectrum-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Visualizing Spectrum Data</h1><p>Next, we’re going to visualize each of the 512 spectrum samples using cubes.</p><p>In <em>Assets &gt; Scripts</em>, find and open the script “Instantiate512cubes”. This script starts off by spawning 512 cubes in a circle such that they all face the center. It then takes the sample data every frame and represents it using the heights of the cubes. The effect will be something like this:</p><p><img src="/decal/assets/images/hw2/8_0.png" alt="image" /></p><p>There are two sections of this script for you to complete on your own. Read the comments for more details on what each section does and hints on how to do it.</p><p>When you’re done, save your work and switch back to Unity. Create a gameobject called “InstantiateCubes” and attach the script to this object. You’ll notice the Cube Prefab isn’t assigned - you can find a prefab for it in <em>Assets &gt; Prefabs</em>.</p><p>Press play! You’ll notice that the camera location isn’t great. Change the position and rotation so that the camera is showing the scene correctly. Remember that while you can edit anything while the game is playing by switching back to the scene view, none of it will save once the game stops playing.</p><p>To work around this, move your camera to where you want it, then click the gear icon in the transform component’s top right to copy component. Then stop play mode (which will move your camera back), click the gear, and paste the component values you just copied.</p><p>Congrats! You now have a working music visualizer.</p><h1 id="introducing-frequency-bands"> <a href="#introducing-frequency-bands" class="anchor-heading" aria-labelledby="introducing-frequency-bands"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introducing Frequency Bands</h1><p>After testing out your visualizer, you might have noticed that most of the movement happens in the first couple cubes (the lower frequencies) while most of the other cubes (higher frequencies) barely move.</p><p>The reason for this is that the lower frequency sounds are much closer together, while the higher frequencies are much more spread out. This means all the low frequencies get shoved into a couple of cubes, while the high frequencies are spread out across a whole bunch of them.</p><p>We’re now going to fix this issue by collating the 512 samples into just 8 bins, which will represent different frequency bands. Audio specialists have grouped the range of human detectable frequencies into 7 broad regions. They are as follows:</p><ol><li>Sub Bass: 20 - 60 Hz<li>Bass: 60 - 250 Hz<li>Low Midrange: 250 - 500 Hz<li>Midrange: 500 - 2k Hz<li>Upper Midrange: 2k - 4k Hz<li>Presence: 4k - 6k Hz<li>Brilliance: 6k- 20k Hz</ol><p><img src="/decal/assets/images/hw2/3.png" alt="image" /></p><p>Notice how the regions roughly increase in size as they increase in frequency. Inspired by this, we’ll create 8 bins where higher frequency bins absorb more samples. We have a total range of 20k - 20 = 19980 Hz to cover, and with 512 samples each sample covers 19980 / 512 = 39 Hz. We’ll define the bins as follows:</p><div class="table-wrapper"><table><thead><tr><th>bin index<th># samples used<th>hertz range<th>range size<tbody><tr><td>0<td>2<td>20 - 98<td>78<tr><td>1<td>4<td>99 - 225<td>156<tr><td>2<td>8<td>256 - 568<td>312<tr><td>3<td>16<td>569 - 1193<td>624<tr><td>4<td>32<td>1194 - 2442<td>1248<tr><td>5<td>64<td>2443 - 4939<td>2496<tr><td>6<td>128<td>4940 - 9932<td>4992<tr><td>7<td>258*<td>9933 - 19995<td>10062</table></div><p><em>*We stick the two last samples into the final bin, hence why it’s 258 and not 256.</em></p><h1 id="8-bin-separation"> <a href="#8-bin-separation" class="anchor-heading" aria-labelledby="8-bin-separation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8 Bin Separation</h1><p>Switch to editing SpectrumAnalyzer. Add a variable for array freqBand, which will contain the collated sample data bins. Also add a function called MakeFrequencyBands(). As filling out this function is rather tedious, we’ve done it for you.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public static float[] freqBand = new float[8];

void MakeFrequencyBands() {
    int count = 0;
    
    // Iterate through the 8 bins.
    for (int i = 0; i &lt; 8; i++)  {
        float average = 0;
        int sampleCount = (int)Mathf.Pow (2, i + 1);

        // Adding the remaining two samples into the last bin.
        if (i == 7) {
            sampleCount += 2;
        }

        // Go through the number of samples for each bin, add the data to the average
        for (int j = 0; j &lt; sampleCount; j++) {
            average += samples [count];
            count++;
        }

        // Divide to create the average, and scale it appropriately.
        average /= count;
        freqBand[i] = (i+1) * 100 * average;
    }
}
</code></pre></div></div><p>Add a call to MakeFrequencyBands() to Update() so it gets called every frame.</p><p>If you ran and debugged this updated script now, you’d find that the value range for each bin vary greatly. To make it easier to work with the values, we’ll scale each bin’s value into a number between 0 and 1.</p><p>Add the following variables and function to SpectrumAnalyzer.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>float[] freqBandHighest = new float[8];
public static float[] audioBands = new float[8];

void CreateAudioBands() {

}
</code></pre></div></div><p>Fill out CreateAudioBands() on your own. This function should first update freqBandHighest, which contains the highest-yet-seen values for each bin. Then it divides each current band value by the highest-yet-seen to get us a number between 0 and 1. This result is saved to array audioBands.</p><p>Once you’ve completed CreateAudioBands(), add it to the end of Update() so it gets called each frame.</p><h1 id="visualizing-8-bins"> <a href="#visualizing-8-bins" class="anchor-heading" aria-labelledby="visualizing-8-bins"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Visualizing 8 Bins</h1><p>Finally, let’s create cubes to visualize the calculated values for each bin.</p><p>Let’s use the cube prefab again, and place eight of them in the middle of the scene. You can simply drag the prefab into the Hierarchy or the scene view. Scale them so they’re visible in the game view.</p><p><img src="/decal/assets/images/hw2/10_0.png" alt="image" /></p><p>We’ll need a script to read the values from audioBands in SpectrumAnalyzer and represent them as heights for each cube. Create a C# script named “Cube”, and add the following variables to it:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int band;
public float startScale;
public float scaleMultiplier;
</code></pre></div></div><p>The variable band represents which bin this cube represents. startScale represents the height of the cube when its audioBand value is 0, and scaleMultiplier is how much to multiply the audioBand value by.</p><p>Fill out the needed functionality on your own. You can refer to Instantiate512cube for help, since the functionality is similar. When you’re done, attach the script to each of the cubes and set the editor values appropriately (remember, you can modify multiple objects at once via shift/ctrl select). You do not have to use the values shown below.</p><p><img src="/decal/assets/images/hw2/9_0.png" alt="image" /></p><p>Now try out your music visualizer!</p><h1 id="add-your-own-flair"> <a href="#add-your-own-flair" class="anchor-heading" aria-labelledby="add-your-own-flair"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add Your Own Flair</h1><p>Your final task is to add your own feature to the music visualizer. This is completely open-ended - you may go as crazy as you’d like. We only request that you do not remove the functionality you’ve implemented thus far.</p><p>Here are some suggestions on what you could add:</p><ul><li><a href="https://docs.unity3d.com/ScriptReference/Light.html">Lights</a><li><a href="https://docs.unity3d.com/ScriptReference/Material.html">Colors</a><li>Different Kinds of Visualization (spheres, rotation, etc.)<li>Band Buffering (removing the choppy movement of the bands)</ul><h1 id="submission-and-grading"> <a href="#submission-and-grading" class="anchor-heading" aria-labelledby="submission-and-grading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Submission and Grading</h1><p>Upload the project via Google Drive and submit the link to bCourses. (Instructions on Ed.) Completion of the functionality described in this homework will get you 4 points (out of 5), and adding your own improvements will get you the last point. There will be extra credit given to those whom we deemed went above and beyond with their improvements.</p><h2 class="no_toc" id="credits"> <a href="#credits" class="anchor-heading" aria-labelledby="credits"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Credits</h2><p>This assignment was taken and adapted from Peter Olthof’s brilliant music visualizer tutorial on Youtube. You can find it on his channel, <a href="https://www.youtube.com/channel/UCBkub2TsbCFIfdhuxRr2Lrw">Peer Play</a>.</p></div></div></div>
